{% extends 'backoffice/base.html' %}
{% block title %}Mensajes de Contacto{% endblock %}
{% block page_title %}Mensajes de Contacto{% endblock %}
{% block content %}
<div class="bg-white rounded-lg shadow-md p-6 mb-6"><div class="flex items-center justify-between"><h3 class="text-xl font-semibold"><i class="fas fa-envelope mr-2 text-primary-600"></i>Mensajes ({{ unread_count }} sin leer)</h3><div class="flex space-x-2"><a href="?status=unread" class="{% if current_status == 'unread' %}bg-primary-600 text-white{% else %}bg-gray-200 text-gray-700{% endif %} px-4 py-2 rounded-lg text-sm">Sin leer</a><a href="?status=read" class="{% if current_status == 'read' %}bg-primary-600 text-white{% else %}bg-gray-200 text-gray-700{% endif %} px-4 py-2 rounded-lg text-sm">Leídos</a><a href="{% url 'backoffice:contact_message_list' %}" class="{% if not current_status %}bg-primary-600 text-white{% else %}bg-gray-200 text-gray-700{% endif %} px-4 py-2 rounded-lg text-sm">Todos</a></div></div></div>
<div class="space-y-4">{% for msg in messages_list %}<div class="bg-white rounded-lg shadow-md p-6 {% if not msg.is_read %}border-l-4 border-primary-600{% endif %}"><div class="flex items-start justify-between mb-3"><div><h4 class="font-semibold text-gray-900">{{ msg.name }}</h4><p class="text-sm text-gray-600">{{ msg.email }} {% if msg.phone %}• {{ msg.phone }}{% endif %}</p><p class="text-xs text-gray-500 mt-1">{{ msg.created_at|date:"d/m/Y H:i" }}</p></div>{% if not msg.is_read %}<span class="px-3 py-1 bg-primary-100 text-primary-800 text-xs rounded-full">Nuevo</span>{% endif %}</div><p class="text-gray-700 bg-gray-50 p-4 rounded">{{ msg.message }}</p></div>{% empty %}<div class="bg-white rounded-lg shadow-md p-12 text-center"><i class="fas fa-inbox text-6xl text-gray-300 mb-4"></i><p class="text-gray-500">No hay mensajes</p></div>{% endfor %}</div>
{% if page_obj.has_other_pages %}<div class="mt-6 flex justify-center"><nav class="inline-flex rounded-md shadow-sm">{% if page_obj.has_previous %}<a href="?page={{ page_obj.previous_page_number }}{% if current_status %}&status={{ current_status }}{% endif %}" class="px-4 py-2 border bg-white text-sm">Anterior</a>{% endif %}{% if page_obj.has_next %}<a href="?page={{ page_obj.next_page_number }}{% if current_status %}&status={{ current_status }}{% endif %}" class="px-4 py-2 border bg-white text-sm">Siguiente</a>{% endif %}</nav></div>{% endif %}
{% endblock %}
